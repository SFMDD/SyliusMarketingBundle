{#BREADCRUMB#}
{% set product = settings.product %}

{% if product is not empty %}
    <script type="application/ld+json">
    {
      "@context": "http://schema.org/",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": "1",
          "item": {
            "@id": "{{ absolute_url(path('sylius_shop_homepage')) }}",
            "name": "{{ "sylius.ui.home"|trans }}"
          }
        }
        {% if product.mainTaxon is not null %}
        {% set count = 2 %}
        {% set taxon = product.mainTaxon %}
        {% set ancestors = taxon.ancestors|reverse %}

        {% for ancestor in ancestors %}
            ,{
              "@type": "ListItem",
              "position": "{{ count }}",
              "item": {
                    {% if ancestor.isRoot() %}
                "@id": "{{ path('sylius_shop_product_index', {'slug': ancestor.slug, '_locale': ancestor.translation.locale}) }}",
                "name": "{{ ancestor.name }}"
              }
            }
                     {% else %}
                "@id": "{{ path('sylius_shop_product_index', {'slug': ancestor.slug, '_locale': ancestor.translation.locale}) }}",
                "name": "{{ ancestor.name }}"
              }
            }
                     {% endif %}
        {% set count = count+1 %}
        {% endfor %}
        ,
        {
          "@type": "ListItem",
          "position": "{{ count }}",
          "item": {
            "@id": "{{ path('sylius_shop_product_index', {'slug': taxon.slug, '_locale': taxon.translation.locale}) }}",
            "name": "{{ taxon.name }}"
          }
        }
        {% endif %}
      ]
    }
</script>
{% endif %}
