{# Produit #}
{% set product = settings.product %}
{% if product is defined %}
    {% if product.images.first %}
        {% set path = product.images.first.path|imagine_filter(filter|default('sylius_shop_product_thumbnail')) %}
    {% else %}
        {% set path = '//placehold.it/200x200' %}
    {% endif %}
<script type="application/ld+json">
    {
      "@context": "http://schema.org/",
      "@type": "Product",
      "name": "{{ product.name|lower }}",
      "image": "{{ absolute_url(path) }}",
      "description": "{% if product.shortDescription|trim is not empty %}{{ product.shortDescription }}{% else %}{{ product.description|truncate(150, true)  }}{% endif %}",
      "brand": "{{ website_name|capitalize }}",
      "sku": "{{ product.code|upper }}",
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "{% if product.averageRating|round > 0 %}{{ product.averageRating|round }}{% else %}0{% endif %}",
        "reviewCount": "{% if product.averageRating|round > 0 %}{{ product.acceptedReviews|length }}{% else %}0{% endif %}"
        }
      }
</script>
{% endif %}
